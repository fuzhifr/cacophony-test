<!DOCTYPE html>
<html>
<head>
<title>Cacophony Demo</title>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript" src="build/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="build/jquery-ui-1.8.6.custom.min.js"></script>
<script type="text/javascript" src="build/cacophony.min.js"></script>
<script type="text/javascript" src="js/settings.js"></script>
<script type="text/javascript" src="js/loadJS.js"></script>
<script id="storyJS" type="text/javascript" src=""></script>
<link rel="stylesheet" type="text/css" href="build/cacophony.min.css" />
</head>
<body>
<script type="text/javascript">
function GetRequest() {
   var url = location.search; //获取url中"?"符后的字串
   var theRequest = new Object();
   if (url.indexOf("?") != -1) {
	  var str = url.substr(1);
	  strs = str.split("&");
	  for(var i = 0; i < strs.length; i ++) {
		 theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);
	  }
   }
   return theRequest;
}

	var Request = new Object();
	Request = GetRequest();
	var realname=decodeURIComponent(Request['realname']);
	var storyFile='js/StoryFile/story'+realname+'.js';
	
$(document).ready (function () {
	// Specify the video files. Multiple files are required to be compatible
	// with the different browsers at this time.
	loadJS('storyJS',storyFile);
	cacophony.setVideo (
		'server/php/files/'+realname+'.mp4',
		'server/php/files/'+realname+'.webm',
		'server/php/files/'+realname+'.ogv'
	);

	cacophony.init ();
	cacophony.play();
});

cacophony.callback.play = function () {
	$('#scrubber').slider ({
		max: cacophony.duration,
		stop: function (event, ui) {
			cacophony.jumpToTime (ui.value, true);
		}
	});
}

cacophony.callback.ready = function () {
	console.log("cacophony ready");
}

cacophony.callback.timeupdate = function (time) {
	$('#scrubber').slider ('option', 'value', time);
}

</script>
<style type="text/css">
#scrubber {
	margin-top: 10px;
	margin-left: auto;
	margin-right: auto;
	width: 854px;
}
</style>
<div id="cacophony"></div>
<div id="scrubber"></div>
</body>
</html>